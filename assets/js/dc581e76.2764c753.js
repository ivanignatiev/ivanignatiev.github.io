"use strict";(self.webpackChunkivanignatiev=self.webpackChunkivanignatiev||[]).push([[386],{3011:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>l});var t=n(3331),o=n(4848),i=n(8453);const r={slug:"secrets-in-ds-notebooks",title:"Note 6: Manage secrets in different notebooks environments",authors:"ivanignatiev",tags:[],date:"2025-03-29T09:30"},a=void 0,c={authorsImageUrls:[void 0]},l=[{value:"Local Notebooks",id:"local-notebooks",level:2},{value:"Google Colab Secrets",id:"google-colab-secrets",level:2},{value:"Databricks",id:"databricks",level:2},{value:"Azure DevOps",id:"azure-devops",level:2}];function d(e){const s={a:"a",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.p,{children:["Look to tutorials for Data Engineers and Data Scientists, responses in Stackoverflow. Hardcoded credentials (",(0,o.jsx)(s.a,{href:"https://cwe.mitre.org/data/definitions/798.html",children:"CWE-798"}),") are everywhere, if not in code, printed in output cell. Risk to push notebook with api-keys to git or a pipeline is very high."]}),"\n",(0,o.jsxs)(s.p,{children:["Static analysis tools ",(0,o.jsx)(s.code,{children:"pynblint"})," and ",(0,o.jsx)(s.code,{children:"bandit"})," does not detect hardcoded secrets in notebooks. Issues can be caught during code review. However, file will be distributed across all team members PCs if merged in some shared branch."]}),"\n",(0,o.jsxs)(s.p,{children:["Public services like GitHub and some serverless services (",(0,o.jsx)(s.a,{href:"https://docs.aws.amazon.com/inspector/latest/user/scanning-lambda.html",children:"Scanning AWS Lambda functions with Amazon Inspector"}),") can identify ",(0,o.jsx)(s.a,{href:"https://cwe.mitre.org/data/definitions/798.html",children:"CWE-798"})," but it does not reduce responsibilities of notebooks and code owners."]}),"\n",(0,o.jsx)(s.h2,{id:"local-notebooks",children:"Local Notebooks"}),"\n",(0,o.jsxs)(s.p,{children:["Use environment variables, or ",(0,o.jsx)(s.code,{children:"dotenv"}),", or ",(0,o.jsx)(s.code,{children:"keyring"}),", or password inputs."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:"secret_in_env = os.environ['ENVIRONMENT_VARIABLE_WITH_SECRET_NAME']\n"})}),"\n",(0,o.jsxs)(s.p,{children:["Do not print your secret variables, or ensure your cell outputs are clean before committing to ",(0,o.jsx)(s.code,{children:"git"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["If you store your secrets in ",(0,o.jsx)(s.code,{children:".env"})," file, add this file to ",(0,o.jsx)(s.code,{children:".gitignore"}),"."]}),"\n",(0,o.jsx)(s.h2,{id:"google-colab-secrets",children:"Google Colab Secrets"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:"from google.colab import userdata\nsecret_in_env = userdata.get('{googleColabSecretName}')\n"})}),"\n",(0,o.jsx)(s.p,{children:"Figure. Google Colab Secrets:"}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{alt:"Google Colab Secrets",src:n(9344).A+"",width:"3840",height:"1876"})}),"\n",(0,o.jsx)(s.h2,{id:"databricks",children:"Databricks"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:'username = dbutils.secrets.get(scope = "{databricksSecretNamespace}", key = "{databricksSecretName}")\n'})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://learn.microsoft.com/en-us/azure/databricks/security/secrets/example-secret-workflow",children:"Tutorial: Create and use a Databricks secret"})}),"\n",(0,o.jsx)(s.h2,{id:"azure-devops",children:"Azure DevOps"}),"\n",(0,o.jsx)(s.p,{children:"In MLOps, ModelOps in pipelines secrets can be stored over Variables Groups. Additionally, Variable Group can be linked to Azure KeyVault."}),"\n",(0,o.jsx)(s.p,{children:"From Variables secrets can be populated as environment variables in pipelines."}),"\n",(0,o.jsx)(s.p,{children:"Figure. Azure DevOps Variable Groups:"}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{alt:"Azure DevOps Variable Groups",src:n(1518).A+"",width:"2540",height:"1340"})})]})}function p(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1518:(e,s,n)=>{n.d(s,{A:()=>t});const t=n.p+"assets/images/azure-devops-variable-groups-d159801dc2815162886b3c2b42354a18.png"},9344:(e,s,n)=>{n.d(s,{A:()=>t});const t=n.p+"assets/images/google-colab-secrets-287d7e8dcf22a10118a7dc1e79110a23.png"},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>a});var t=n(6540);const o={},i=t.createContext(o);function r(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:s},e.children)}},3331:e=>{e.exports=JSON.parse('{"permalink":"/secrets-in-ds-notebooks","source":"@site/blog/note0006-secrets-in-ds-notebooks.md","title":"Note 6: Manage secrets in different notebooks environments","description":"Look to tutorials for Data Engineers and Data Scientists, responses in Stackoverflow. Hardcoded credentials (CWE-798) are everywhere, if not in code, printed in output cell. Risk to push notebook with api-keys to git or a pipeline is very high.","date":"2025-03-29T09:30:00.000Z","tags":[],"readingTime":1.175,"hasTruncateMarker":false,"authors":[{"name":"Ivan Ignatiev","socials":{"x":"https://x.com/ivan_ignatiev","github":"https://github.com/ivanignatiev","linkedin":"https://www.linkedin.com/in/ivan-ignatiev/"},"imageURL":"https://github.com/ivanignatiev.png","key":"ivanignatiev","page":null}],"frontMatter":{"slug":"secrets-in-ds-notebooks","title":"Note 6: Manage secrets in different notebooks environments","authors":"ivanignatiev","tags":[],"date":"2025-03-29T09:30"},"unlisted":false,"nextItem":{"title":"Note 5: Boost Python Pipelines Speed by 3-5x","permalink":"/azure-devops-container-jobs.md"}}')}}]);