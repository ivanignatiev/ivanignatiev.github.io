"use strict";(self.webpackChunkivanignatiev=self.webpackChunkivanignatiev||[]).push([[953],{1954:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var i=t(6837),s=t(4848),o=t(8453);const r={slug:"azure-devops-container-jobs.md",title:"Note 5: Boost Python Pipelines Speed by 3-5x",authors:"ivanignatiev",tags:[],date:"2025-03-28T09:30"},a=void 0,l={authorsImageUrls:[void 0]},c=[{value:"Configure container Jobs in Azure DevOps",id:"configure-container-jobs-in-azure-devops",level:2},{value:"Install PyTorch CPU only",id:"install-pytorch-cpu-only",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"There's no need to install Python dependencies for tests every single time with Microsoft-hosted agents for Azure Pipelines."}),"\n",(0,s.jsx)(n.p,{children:"Instead, run your tests inside containers that have everything pre-installed and preconfigured. This way, the dependency installation time is replaced by the quicker process of pulling a container image."}),"\n",(0,s.jsx)(n.p,{children:"Figure. From dependencies installation in pipeline to using container job."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Boost Python Pipelines Speed by 3-5x",src:t(270).A+"",width:"622",height:"341"})}),"\n",(0,s.jsx)(n.admonition,{title:"Special tip for ModelOps and MLOps:",type:"tip",children:(0,s.jsx)(n.p,{children:"When running unit tests, install the CPU-only version of PyTorch. This significantly reduces the image size and accelerates the container pull time."})}),"\n",(0,s.jsx)(n.h2,{id:"configure-container-jobs-in-azure-devops",children:"Configure container Jobs in Azure DevOps"}),"\n",(0,s.jsxs)(n.p,{children:["In addition to ",(0,s.jsx)(n.code,{children:"pool:"})," job setting add container configuration:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'pool:\n    vmImage: ubuntu-latest\n\ncontainer:\n    image: "{reference to an image with dependencies installed}"\n    endpoint: "{registry Azure DevOps project service connection}"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"install-pytorch-cpu-only",children:"Install PyTorch CPU only"}),"\n",(0,s.jsx)(n.p,{children:"It will not only accelerate container image building but also it will reduce the size of the container image."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"pip install torch==2.5.1 torchvision==0.20.1 torchaudio==2.5.1 --index-url https://download.pytorch.org/whl/cpu\n"})}),"\n",(0,s.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/devops/pipelines/process/container-phases",children:"Container jobs in YAML pipelines"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://pytorch.org/get-started/previous-versions/",children:"PyTorch Installation Commands"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},270:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/faster-pipelines-1d9f25843f98c9a1d7aaaa92efa54d58.svg"},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(6540);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}},6837:e=>{e.exports=JSON.parse('{"permalink":"/azure-devops-container-jobs.md","source":"@site/blog/note0005-azure-devops-container-jobs.md","title":"Note 5: Boost Python Pipelines Speed by 3-5x","description":"There\'s no need to install Python dependencies for tests every single time with Microsoft-hosted agents for Azure Pipelines.","date":"2025-03-28T09:30:00.000Z","tags":[],"readingTime":0.875,"hasTruncateMarker":false,"authors":[{"name":"Ivan Ignatiev","socials":{"x":"https://x.com/ivan_ignatiev","github":"https://github.com/ivanignatiev","linkedin":"https://www.linkedin.com/in/ivan-ignatiev/"},"imageURL":"https://github.com/ivanignatiev.png","key":"ivanignatiev","page":null}],"frontMatter":{"slug":"azure-devops-container-jobs.md","title":"Note 5: Boost Python Pipelines Speed by 3-5x","authors":"ivanignatiev","tags":[],"date":"2025-03-28T09:30"},"unlisted":false,"prevItem":{"title":"Note 6: Manage secrets in different notebooks environments","permalink":"/secrets-in-ds-notebooks"},"nextItem":{"title":"Note 4: Azure Boards Backlog Structure","permalink":"/azure-boards-backlog-structure"}}')}}]);